<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Pecuario GB - v38</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #222;
    }
    header {
      background: #4b3b2d;
      color: #fff;
      padding: 10px 16px;
    }
    header h1 {
      margin: 0;
      font-size: 18px;
    }
    header small {
      display: block;
      font-size: 11px;
      opacity: 0.9;
    }
    .subleyenda {
      font-size: 11px;
      margin-top: 4px;
      color: #f0e0c0;
      font-style: italic;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      padding: 6px;
      background: #eae7e2;
      border-bottom: 1px solid #d0c8c0;
    }
    nav button {
      flex: 1 1 calc(25% - 4px);
      min-width: 110px;
      padding: 6px 4px;
      font-size: 11px;
      border-radius: 4px;
      border: 1px solid #b9b1a7;
      background: #ffffff;
      cursor: pointer;
    }
    nav button.activo {
      background: #8b4513;
      color: #fff;
      border-color: #5a2f0c;
      font-weight: 600;
    }
    main {
      padding: 10px;
      max-width: 1100px;
      margin: 0 auto 24px auto;
    }
    section.modulo {
      display: none;
      background: #ffffff;
      padding: 12px;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.10);
      margin-bottom: 16px;
    }
    section.modulo.activo { display: block; }

    h2 { font-size: 17px; margin-top: 0; margin-bottom: 6px; color: #4b3b2d; }
    h3 { font-size: 14px; margin-bottom: 4px; color: #5a4636; }
    p  { font-size: 12px; margin: 4px 0; }

    form { margin-top: 6px; margin-bottom: 10px; }
    label {
      display: block;
      font-size: 12px;
      margin-top: 6px;
      margin-bottom: 2px;
    }
    input, select, textarea {
      width: 100%;
      padding: 6px 8px;
      font-size: 12px;
      border-radius: 4px;
      border: 1px solid #c7c0b8;
    }
    textarea {
      min-height: 60px;
      resize: vertical;
    }
    .fila-dos {
      display: grid;
      grid-template-columns: repeat(2,minmax(0,1fr));
      gap: 6px;
    }
    .fila-tres {
      display: grid;
      grid-template-columns: repeat(3,minmax(0,1fr));
      gap: 6px;
    }
    .acciones {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .acciones button {
      padding: 6px 10px;
      font-size: 12px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
    }
    .btn-primario   { background: #27ae60; color: #fff; }
    .btn-secundario { background: #95a5a6; color: #fff; }
    .btn-alerta     { background: #c0392b; color: #fff; }

    .nota {
      font-size: 11px;
      color: #7f8c8d;
      margin-top: 4px;
    }

    .tarjetas-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
      gap: 8px;
      margin-top: 8px;
    }
    .tarjeta {
      background: #faf7f3;
      border-radius: 4px;
      padding: 8px;
      border: 1px solid #e1d7cd;
      font-size: 12px;
    }
    .tarjeta strong { display: block; margin-bottom: 4px; }

    .lista {
      margin-top: 8px;
      font-size: 12px;
      background: #f9f9f9;
      border-radius: 4px;
      padding: 6px 8px;
      max-height: 260px;
      overflow-y: auto;
      border: 1px solid #eee;
    }
    .lista div {
      padding: 4px 0;
      border-bottom: 1px dashed #ddd;
    }
    .lista div:last-child { border-bottom: none; }

    details {
      margin-top: 6px;
      border-radius: 4px;
      background: #f7f5f2;
      border: 1px solid #e2dbd4;
      padding: 4px 6px;
      font-size: 12px;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: #4b3b2d;
    }

    @media (max-width: 700px) {
      nav button { flex: 1 1 calc(50% - 4px); }
      .fila-dos, .fila-tres { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
<header>
  <h1>Pecuario GB</h1>
  <small>Control operativo integral de ganado bovino</small>
  <div class="subleyenda">Información para la permanencia y desarrollo de tu rancho</div>
</header>

<nav>
  <button data-modulo="panel" class="activo">Panel</button>
  <button data-modulo="animales">Animales</button>
  <button data-modulo="pesos">Pesos</button>
  <button data-modulo="potreros">Potreros</button>
  <button data-modulo="corrales">Corrales móviles</button>
  <button data-modulo="repro">Reproducción y partos</button>
  <button data-modulo="sanidad">Sanidad</button>
  <button data-modulo="clima">Clima</button>
  <button data-modulo="conta">Contabilidad</button>
  <button data-modulo="seguridad">Seguridad y visitas</button>
  <button data-modulo="maquinaria">Maquinaria y equipo</button>
  <button data-modulo="actividades">Actividades</button>
  <button data-modulo="reportes">Reportes</button>
  <button data-modulo="config">Configuración</button>
</nav>

<main>
  <!-- PANEL -->
  <section id="mod-panel" class="modulo activo">
    <h2>Panel general</h2>
    <p>Resumen rápido del rancho con base en los registros capturados.</p>
    <div class="tarjetas-grid">
      <div class="tarjeta">
        <strong>Animales registrados</strong>
        <span id="pnl-animales">0</span>
      </div>
      <div class="tarjeta">
        <strong>Pesajes registrados</strong>
        <span id="pnl-pesos">0</span>
      </div>
      <div class="tarjeta">
        <strong>Crías nacidas</strong>
        <span id="pnl-partos">0</span>
      </div>
      <div class="tarjeta">
        <strong>Eventos de sanidad</strong>
        <span id="pnl-sanidad">0</span>
      </div>
      <div class="tarjeta">
        <strong>Visitas registradas</strong>
        <span id="pnl-visitas">0</span>
      </div>
      <div class="tarjeta">
        <strong>Registros de velador</strong>
        <span id="pnl-bitacora">0</span>
      </div>
      <div class="tarjeta">
        <strong>Último clima</strong>
        <span id="pnl-clima">Sin datos</span>
      </div>
      <div class="tarjeta">
        <strong>Ingresos - Gastos (simple)</strong>
        <span id="pnl-conta">0 / 0</span>
      </div>
    </div>
    <p class="nota">Esto es un resumen simple con base en la información capturada en los módulos.</p>
  </section>

  <!-- ANIMALES -->
  <section id="mod-animales" class="modulo">
    <h2>Animales</h2>
    <p>Altas, bajas y movimientos de animales.</p>
    <form id="form-animales">
      <div class="fila-dos">
        <div>
          <label>Arete oficial</label>
          <input name="areteOficial" required />
        </div>
        <div>
          <label>Arete rancho</label>
          <input name="areteRancho" />
        </div>
      </div>

      <div class="fila-tres">
        <div>
          <label>Sexo</label>
          <select name="sexo">
            <option value="">Selecciona…</option>
            <option value="Hembra">Hembra</option>
            <option value="Macho">Macho</option>
          </select>
        </div>
        <div>
          <label>Raza preponderante</label>
          <select name="raza">
            <option value="">Selecciona…</option>
            <option>Charolais</option>
            <option>Angus</option>
            <option>Pardo Suizo</option>
            <option>Brahman</option>
            <option>Holstein</option>
            <option>Santa Gertrudis</option>
            <option>Limousin</option>
            <option>Wagyu</option>
            <option>Akaushi</option>
            <option>Nelore</option>
            <option>Brafor</option>
            <option>Tropicarne</option>
            <option>Hereford</option>
            <option>Beefmaster</option>
            <option>Brangus</option>
            <option>Otro</option>
          </select>
        </div>
        <div>
          <label>Mezcla 1 / Mezcla 2 (opcional)</label>
          <input name="mezclas" placeholder="Ej. Pardo Suizo / Brahman" />
        </div>
      </div>

      <div class="fila-dos">
        <div>
          <label>Fecha de nacimiento</label>
          <input type="date" name="fechaNac" />
        </div>
        <div>
          <label>Grupo</label>
          <select name="grupo">
            <option value="">Selecciona…</option>
            <option>Vientre en desarrollo</option>
            <option>Vientre en empadre</option>
            <option>Vientre en gestación</option>
            <option>Vientre en parición</option>
            <option>Vientre amamantando</option>
            <option>Vientre vacío</option>
            <option>Cría en desarrollo</option>
            <option>Ganado estabulado</option>
            <option>Toro</option>
          </select>
        </div>
      </div>

      <div class="fila-dos">
        <div>
          <label>Propiedad</label>
          <select name="propiedad">
            <option value="">Selecciona…</option>
            <option>Propio</option>
            <option>Renta</option>
          </select>
        </div>
        <div>
          <label>Observaciones</label>
          <input name="obs" />
        </div>
      </div>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar animal</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-animales')">Limpiar</button>
      </div>
    </form>

    <details>
      <summary>Actividades sugeridas (Animales)</summary>
      <ul>
        <li>Registro de altas, bajas y movimientos.</li>
        <li>Asignación de grupo según condición física.</li>
        <li>Asignación de responsable por registro.</li>
      </ul>
    </details>

    <div class="lista" id="lista-animales"></div>
  </section>

  <!-- PESOS -->
  <section id="mod-pesos" class="modulo">
    <h2>Pesos</h2>
    <p>Registro de pesajes y revisión de ganancias / pérdidas.</p>
    <form id="form-pesos">
      <div class="fila-dos">
        <div>
          <label>Arete oficial</label>
          <input name="areteOficial" required />
        </div>
        <div>
          <label>Fecha de pesaje</label>
          <input type="date" name="fecha" required />
        </div>
      </div>
      <div class="fila-dos">
        <div>
          <label>Peso (kg)</label>
          <input type="number" step="0.1" name="peso" required />
        </div>
        <div>
          <label>Potrero / Corral</label>
          <input name="lote" />
        </div>
      </div>
      <label>Observaciones</label>
      <textarea name="obs"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar pesaje</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-pesos')">Limpiar</button>
      </div>
    </form>

    <details>
      <summary>Actividades sugeridas (Pesos)</summary>
      <ul>
        <li>Pesaje según periodicidad establecida.</li>
        <li>Revisión de ganancias y pérdidas de peso.</li>
        <li>Reasignación de grupos según condición corporal.</li>
      </ul>
    </details>

    <div class="lista" id="lista-pesos"></div>
  </section>

  <!-- POTREROS -->
  <section id="mod-potreros" class="modulo">
    <h2>Potreros</h2>
    <p>Registro de potreros y parámetros de pastoreo.</p>
    <form id="form-potreros">
      <label>Nombre del potrero</label>
      <input name="nombre" required />

      <div class="fila-dos">
        <div>
          <label>Área (hectáreas)</label>
          <input type="number" step="0.01" name="area" />
        </div>
        <div>
          <label>Densidad objetivo (animales/ha)</label>
          <select name="densidad">
            <option value="">Selecciona…</option>
            <option>500</option>
            <option>1000</option>
            <option>1500</option>
            <option>2000</option>
            <option>3000</option>
            <option>5000</option>
          </select>
        </div>
      </div>

      <label>Descripción / notas</label>
      <textarea name="desc"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar potrero</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-potreros')">Limpiar</button>
      </div>
    </form>

    <details>
      <summary>Actividades sugeridas (Potreros y corrales)</summary>
      <ul>
        <li>Identificar potreros disponibles para pastoreo.</li>
        <li>Definir diseños y áreas de corrales móviles.</li>
        <li>Registrar uso y recuperación de cada potrero.</li>
      </ul>
    </details>

    <div class="lista" id="lista-potreros"></div>
  </section>

  <!-- CORRALES MÓVILES -->
  <section id="mod-corrales" class="modulo">
    <h2>Corrales móviles</h2>
    <p>Uso de corrales móviles por potrero, grupo y fechas.</p>
    <form id="form-corrales">
      <div class="fila-dos">
        <div>
          <label>Nombre del corral</label>
          <input name="nombre" required />
        </div>
        <div>
          <label>Potrero asociado</label>
          <input name="potrero" />
        </div>
      </div>

      <div class="fila-tres">
        <div>
          <label>Área aproximada (m²)</label>
          <input type="number" step="1" name="area" />
        </div>
        <div>
          <label>Fecha / hora entrada</label>
          <input type="datetime-local" name="entrada" />
        </div>
        <div>
          <label>Fecha / hora salida</label>
          <input type="datetime-local" name="salida" />
        </div>
      </div>

      <label>Grupo de animales (ej. Vientres en empadre)</label>
      <input name="grupo" />

      <label>Observaciones</label>
      <textarea name="obs"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar corral</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-corrales')">Limpiar</button>
      </div>
    </form>

    <div class="lista" id="lista-corrales"></div>
  </section>

  <!-- REPRODUCCIÓN Y PARTOS -->
  <section id="mod-repro" class="modulo">
    <h2>Reproducción y partos</h2>
    <p>Seguimiento de empadres, gestaciones y partos.</p>
    <form id="form-repro">
      <div class="fila-dos">
        <div>
          <label>Arete vientre</label>
          <input name="vientre" required />
        </div>
        <div>
          <label>Arete / nombre del toro</label>
          <input name="toro" />
        </div>
      </div>

      <div class="fila-tres">
        <div>
          <label>Fecha de empadre</label>
          <input type="date" name="fechaEmp" />
        </div>
        <div>
          <label>Fecha probable de parto</label>
          <input type="date" name="fechaProb" />
        </div>
        <div>
          <label>Fecha de parto</label>
          <input type="date" name="fechaParto" />
        </div>
      </div>

      <div class="fila-tres">
        <div>
          <label>Sexo de la cría</label>
          <select name="sexoCria">
            <option value="">Selecciona…</option>
            <option>Hembra</option>
            <option>Macho</option>
          </select>
        </div>
        <div>
          <label>Peso al nacer (kg)</label>
          <input type="number" step="0.1" name="pesoCria" />
        </div>
        <div>
          <label>Problemas en parto</label>
          <select name="problemas">
            <option value="">No especificado</option>
            <option>No</option>
            <option>Sí</option>
          </select>
        </div>
      </div>

      <label>Descripción de problemas / observaciones</label>
      <textarea name="obs"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar evento</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-repro')">Limpiar</button>
      </div>
    </form>

    <details>
      <summary>Actividades sugeridas (Reproducción y partos)</summary>
      <ul>
        <li>Vigilancia de vientres en gestación.</li>
        <li>Atención al parto y a la cría (calostros, primeras horas).</li>
        <li>Registro de problemas y seguimiento.</li>
      </ul>
    </details>

    <div class="lista" id="lista-repro"></div>
  </section>

  <!-- SANIDAD -->
  <section id="mod-sanidad" class="modulo">
    <h2>Sanidad</h2>
    <p>Eventos sanitarios: enfermedades, tratamientos y vacunación.</p>
    <form id="form-sanidad">
      <div class="fila-dos">
        <div>
          <label>Arete oficial</label>
          <input name="arete" />
        </div>
        <div>
          <label>Fecha</label>
          <input type="date" name="fecha" />
        </div>
      </div>

      <div class="fila-tres">
        <div>
          <label>Tipo de evento</label>
          <select name="tipo">
            <option value="">Selecciona…</option>
            <option>Preventivo (vacuna)</option>
            <option>Correctivo (enfermedad)</option>
          </select>
        </div>
        <div>
          <label>Enfermedad / motivo</label>
          <input name="enfermedad" placeholder="Ej. Anaplasmosis, Brucelosis…" />
        </div>
        <div>
          <label>Temperatura (°C)</label>
          <input type="number" step="0.1" name="temp" />
        </div>
      </div>

      <label>Tratamiento / vacuna aplicada</label>
      <input name="tratamiento" />

      <label>Observaciones</label>
      <textarea name="obs"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar sanidad</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-sanidad')">Limpiar</button>
      </div>
    </form>

    <details>
      <summary>Programa de vacunación (plantilla simple)</summary>
      <p class="nota">Aquí se puede registrar el programa anual de vacunación y fechas clave.</p>
    </details>

    <div class="lista" id="lista-sanidad"></div>
  </section>

  <!-- CLIMA -->
  <section id="mod-clima" class="modulo">
    <h2>Clima</h2>
    <p>Registro diario de clima del rancho.</p>
    <form id="form-clima">
      <div class="fila-tres">
        <div>
          <label>Fecha</label>
          <input type="date" name="fecha" />
        </div>
        <div>
          <label>Temperatura mínima (°C)</label>
          <input type="number" step="0.1" name="tmin" />
        </div>
        <div>
          <label>Temperatura máxima (°C)</label>
          <input type="number" step="0.1" name="tmax" />
        </div>
      </div>

      <div class="fila-dos">
        <div>
          <label>Condición del día</label>
          <select name="cond">
            <option value="">Selecciona…</option>
            <option>Soleado</option>
            <option>Medio nublado</option>
            <option>Nublado</option>
            <option>Lluvia ligera</option>
            <option>Lluvia fuerte</option>
          </select>
        </div>
        <div>
          <label>Precipitación (mm)</label>
          <input type="number" step="0.1" name="lluvia" />
        </div>
      </div>

      <label>Observaciones</label>
      <textarea name="obs"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar clima</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-clima')">Limpiar</button>
      </div>
    </form>

    <div class="lista" id="lista-clima"></div>
  </section>

  <!-- CONTABILIDAD -->
  <section id="mod-conta" class="modulo">
    <h2>Contabilidad (flujos simples)</h2>
    <p>Registro básico de ingresos y gastos del rancho.</p>
    <form id="form-conta">
      <div class="fila-tres">
        <div>
          <label>Fecha</label>
          <input type="date" name="fecha" />
        </div>
        <div>
          <label>Tipo</label>
          <select name="tipo">
            <option value="">Selecciona…</option>
            <option>Ingreso</option>
            <option>Gasto</option>
          </select>
        </div>
        <div>
          <label>Monto</label>
          <input type="number" step="0.01" name="monto" />
        </div>
      </div>

      <label>Cuenta / concepto</label>
      <input name="cuenta" placeholder="Ej. Ventas vientres, Suplementos, Mano de obra…" />

      <label>Descripción</label>
      <textarea name="desc"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar movimiento</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-conta')">Limpiar</button>
      </div>
    </form>

    <div class="lista" id="lista-conta"></div>
  </section>

  <!-- SEGURIDAD Y VISITAS -->
  <section id="mod-seguridad" class="modulo">
    <h2>Seguridad y visitas</h2>
    <p>Registro de visitas, vehículos y bitácora de veladores.</p>

    <h3>Registro de visitantes</h3>
    <form id="form-visitas">
      <div class="fila-tres">
        <div>
          <label>Fecha</label>
          <input type="date" name="fecha" />
        </div>
        <div>
          <label>Hora llegada</label>
          <input type="time" name="horaLlegada" />
        </div>
        <div>
          <label>Hora salida</label>
          <input type="time" name="horaSalida" />
        </div>
      </div>

      <div class="fila-dos">
        <div>
          <label>Nombre del visitante / grupo</label>
          <input name="nombre" />
        </div>
        <div>
          <label>Asunto / a quién busca</label>
          <input name="asunto" />
        </div>
      </div>

      <div class="fila-dos">
        <div>
          <label>Vehículo</label>
          <input name="vehiculo" placeholder="Tipo de vehículo" />
        </div>
        <div>
          <label>Placas</label>
          <input name="placas" />
        </div>
      </div>

      <label>Observaciones</label>
      <textarea name="obs"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar visita</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-visitas')">Limpiar</button>
      </div>
    </form>

    <h3>Bitácora diaria del velador</h3>
    <form id="form-bitacora">
      <div class="fila-dos">
        <div>
          <label>Fecha</label>
          <input type="date" name="fecha" />
        </div>
        <div>
          <label>Hora</label>
          <input type="time" name="hora" />
        </div>
      </div>

      <label>Descripción de hechos / observaciones</label>
      <textarea name="evento" placeholder="Eventos relevantes del día/noche"></textarea>

      <label>Involucrados (personas, animales, clima, otros)</label>
      <textarea name="involucrados"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar registro</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-bitacora')">Limpiar</button>
      </div>
    </form>

    <div class="lista" id="lista-seguridad"></div>
  </section>

  <!-- MAQUINARIA Y EQUIPO -->
  <section id="mod-maquinaria" class="modulo">
    <h2>Maquinaria, equipo y herramientas</h2>
    <p>Inventario y mantenimiento básico de maquinaria, equipo, instalaciones y herramientas.</p>

    <form id="form-maquinaria">
      <div class="fila-tres">
        <div>
          <label>Tipo de activo</label>
          <select name="tipo">
            <option value="">Selecciona…</option>
            <option>Maquinaria</option>
            <option>Equipo</option>
            <option>Herramienta</option>
            <option>Instalación</option>
          </select>
        </div>
        <div>
          <label>Cantidad</label>
          <input type="number" step="1" name="cantidad" />
        </div>
        <div>
          <label>Vida útil (años estimados)</label>
          <input type="number" step="1" name="vida" />
        </div>
      </div>

      <label>Descripción del activo</label>
      <input name="desc" placeholder="Ej. Tractor mediano 80 HP, Bomba de agua, etc." />

      <div class="fila-dos">
        <div>
          <label>Marca / Modelo</label>
          <input name="marcaModelo" />
        </div>
        <div>
          <label>Número de serie (opcional)</label>
          <input name="serie" />
        </div>
      </div>

      <div class="fila-tres">
        <div>
          <label>Fecha de adquisición</label>
          <input type="date" name="fechaAdq" />
        </div>
        <div>
          <label>Último mantenimiento</label>
          <input type="date" name="fechaMant" />
        </div>
        <div>
          <label>Costo del último mantenimiento</label>
          <input type="number" step="0.01" name="costoMant" />
        </div>
      </div>

      <label>Descripción del mantenimiento / taller / mecánico</label>
      <textarea name="detMant"></textarea>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar activo</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-maquinaria')">Limpiar</button>
      </div>
    </form>

    <div class="lista" id="lista-maquinaria"></div>
  </section>

  <!-- ACTIVIDADES -->
  <section id="mod-actividades" class="modulo">
    <h2>Actividades por módulo</h2>
    <p>Guía de trabajo para vaqueros y supervisores, con responsable y periodicidad.</p>

    <form id="form-actividades">
      <div class="fila-dos">
        <div>
          <label>Módulo</label>
          <select name="modulo">
            <option value="">Selecciona…</option>
            <option>Animales</option>
            <option>Pesos</option>
            <option>Potreros</option>
            <option>Corrales móviles</option>
            <option>Reproducción y partos</option>
            <option>Sanidad</option>
            <option>Clima</option>
            <option>Contabilidad</option>
            <option>Seguridad y visitas</option>
            <option>Maquinaria y equipo</option>
            <option>Reportes</option>
          </select>
        </div>
        <div>
          <label>Responsable</label>
          <input name="responsable" placeholder="Nombre del vaquero / supervisor" />
        </div>
      </div>

      <label>Descripción de la actividad</label>
      <textarea name="actividad" placeholder="Ej. Revisar animales enfermos, pesar grupo 1, revisar corrales, etc."></textarea>

      <div class="fila-tres">
        <div>
          <label>Periodicidad</label>
          <select name="periodicidad">
            <option value="">Selecciona…</option>
            <option>Diaria</option>
            <option>Terciada</option>
            <option>Semanal</option>
            <option>Quincenal</option>
            <option>Mensual</option>
            <option>Trimestral</option>
            <option>Semestral</option>
            <option>Anual</option>
            <option>Esporádica</option>
            <option>Otra</option>
          </select>
        </div>
        <div>
          <label>Semáforo objetivo</label>
          <select name="semaforo">
            <option value="">Sin color</option>
            <option>Verde</option>
            <option>Amarillo</option>
            <option>Rojo</option>
          </select>
        </div>
        <div>
          <label>Notas</label>
          <input name="notas" />
        </div>
      </div>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar actividad</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-actividades')">Limpiar</button>
      </div>
    </form>

    <div class="lista" id="lista-actividades"></div>
  </section>

  <!-- REPORTES -->
  <section id="mod-reportes" class="modulo">
    <h2>Reportes</h2>
    <p>Resumen simple de registros por módulo (solo conteos, por ahora).</p>

    <table class="tabla-simple">
      <thead>
        <tr>
          <th>Módulo</th>
          <th>Registros</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Animales</td><td id="rep-animales">0</td></tr>
        <tr><td>Pesos</td><td id="rep-pesos">0</td></tr>
        <tr><td>Reproducción y partos</td><td id="rep-repro">0</td></tr>
        <tr><td>Sanidad</td><td id="rep-sanidad">0</td></tr>
        <tr><td>Clima</td><td id="rep-clima">0</td></tr>
        <tr><td>Contabilidad</td><td id="rep-conta">0</td></tr>
        <tr><td>Visitas y seguridad</td><td id="rep-seguridad">0</td></tr>
        <tr><td>Maquinaria y equipo</td><td id="rep-maquinaria">0</td></tr>
        <tr><td>Actividades</td><td id="rep-actividades">0</td></tr>
      </tbody>
    </table>

    <p class="nota">En futuras versiones se pueden agregar más reportes y KPI detallados.</p>
  </section>

  <!-- CONFIGURACIÓN -->
  <section id="mod-config" class="modulo">
    <h2>Configuración del rancho</h2>
    <p>Datos generales del rancho y capacidad estimada.</p>

    <form id="form-config">
      <label>Nombre del rancho</label>
      <input name="nombreRancho" />

      <label>Propietario</label>
      <input name="propietario" />

      <div class="fila-tres">
        <div>
          <label>Extensión total (ha)</label>
          <input type="number" step="0.01" name="haTotales" />
        </div>
        <div>
          <label>Ha de agostadero</label>
          <input type="number" step="0.01" name="haAgostadero" />
        </div>
        <div>
          <label>Ha de pastos</label>
          <input type="number" step="0.01" name="haPastos" />
        </div>
      </div>

      <div class="fila-dos">
        <div>
          <label>Capacidad estimada de vientres y crías al año</label>
          <input type="number" step="1" name="capacidad" />
        </div>
        <div>
          <label>Animales actuales</label>
          <input type="number" step="1" name="animalesActuales" />
        </div>
      </div>

      <div class="acciones">
        <button type="submit" class="btn-primario">Guardar configuración</button>
        <button type="button" class="btn-secundario" onclick="limpiarFormulario('form-config')">Limpiar</button>
      </div>
    </form>

    <p class="nota">Estos datos se usan solo como referencia general y pueden ajustarse en cualquier momento.</p>
  </section>
</main>

<script>
  function getData(key) {
    try {
      return JSON.parse(localStorage.getItem(key)) || [];
    } catch (e) {
      return [];
    }
  }
  function setData(key, value) {
    localStorage.setItem(key, JSON.stringify(value));
  }

  const navBtns = document.querySelectorAll('nav button');
  const modulos = document.querySelectorAll('section.modulo');

  navBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = btn.getAttribute('data-modulo');
      navBtns.forEach(b => b.classList.remove('activo'));
      btn.classList.add('activo');
      modulos.forEach(sec => sec.classList.remove('activo'));
      const destino = document.getElementById('mod-' + target);
      if (destino) destino.classList.add('activo');
      actualizarPanel();
      actualizarReportes();
    });
  });

  function limpiarFormulario(idForm) {
    const form = document.getElementById(idForm);
    if (form) form.reset();
  }

  function manejarFormulario(idForm, storageKey, idLista, formatearLinea, extraCallback) {
    const form = document.getElementById(idForm);
    if (!form) return;
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const datos = new FormData(form);
      const obj = {};
      datos.forEach((val, key) => { obj[key] = val; });
      const lista = getData(storageKey);
      obj._fechaRegistro = new Date().toISOString();
      lista.push(obj);
      setData(storageKey, lista);
      if (idLista) pintarLista(storageKey, idLista, formatearLinea);
      form.reset();
      actualizarPanel();
      actualizarReportes();
      if (extraCallback) extraCallback(obj, lista);
      alert('Registro guardado.');
    });
    if (idLista) pintarLista(storageKey, idLista, formatearLinea);
  }

  function pintarLista(storageKey, idLista, formatearLinea) {
    const cont = document.getElementById(idLista);
    if (!cont) return;
    const lista = getData(storageKey);
    cont.innerHTML = '';
    if (!lista.length) {
      cont.innerHTML = '<div>Sin registros.</div>';
      return;
    }
    lista.forEach(item => {
      const div = document.createElement('div');
      div.textContent = formatearLinea(item);
      cont.appendChild(div);
    });
  }

  manejarFormulario(
    'form-animales',
    'pecuario_animales',
    'lista-animales',
    (a) => `Arete ${a.areteOficial || '-'} | Sexo: ${a.sexo || '-'} | Raza: ${a.raza || '-'} | Grupo: ${a.grupo || '-'}`,
    null
  );

  manejarFormulario(
    'form-pesos',
    'pecuario_pesos',
    'lista-pesos',
    (p) => `Arete ${p.areteOficial || '-'} | Fecha: ${p.fecha || '-'} | Peso: ${p.peso || ''} kg | Lote: ${p.lote || '-'}`,
    null
  );

  manejarFormulario(
    'form-potreros',
    'pecuario_potreros',
    'lista-potreros',
    (p) => `Potrero ${p.nombre || '-'} | Área: ${p.area || ''} ha | Densidad: ${p.densidad || '-'}`,
    null
  );

  manejarFormulario(
    'form-corrales',
    'pecuario_corrales',
    'lista-corrales',
    (c) => `Corral ${c.nombre || '-'} en potrero ${c.potrero || '-'} | Área: ${c.area || ''} m² | Grupo: ${c.grupo || '-'}`,
    null
  );

  manejarFormulario(
    'form-repro',
    'pecuario_repro',
    'lista-repro',
    (r) => `Vientre ${r.vientre || '-'} | Toro: ${r.toro || '-'} | Parto: ${r.fechaParto || '-'} | Cría: ${r.sexoCria || '-'} ${r.pesoCria || ''} kg`,
    null
  );

  manejarFormulario(
    'form-sanidad',
    'pecuario_sanidad',
    'lista-sanidad',
    (s) => `Arete ${s.arete || '-'} | ${s.tipo || ''} | Enf: ${s.enfermedad || '-'} | Tratamiento: ${s.tratamiento || '-'}`,
    null
  );

  manejarFormulario(
    'form-clima',
    'pecuario_clima',
    'lista-clima',
    (c) => `Fecha ${c.fecha || '-'} | Tmin: ${c.tmin || ''}°C / Tmax: ${c.tmax || ''}°C | Condición: ${c.cond || '-'} | Lluvia: ${c.lluvia || ''} mm`,
    null
  );

  manejarFormulario(
    'form-conta',
    'pecuario_conta',
    'lista-conta',
    (c) => `${c.tipo || ''} | ${c.fecha || ''} | ${c.cuenta || '-'} | $${c.monto || ''}`,
    null
  );

  manejarFormulario(
    'form-visitas',
    'pecuario_visitas',
    null,
    null,
    null
  );
  manejarFormulario(
    'form-bitacora',
    'pecuario_bitacora',
    'lista-seguridad',
    (b) => `Fecha ${b.fecha || '-'} ${b.hora || ''} | Evento: ${b.evento || '-'}`,
    null
  );

  manejarFormulario(
    'form-maquinaria',
    'pecuario_maquinaria',
    'lista-maquinaria',
    (m) => `${m.tipo || '-'} | ${m.desc || '-'} | Cant: ${m.cantidad || ''} | Últ. mantto: ${m.fechaMant || '-'}`,
    null
  );

  manejarFormulario(
    'form-actividades',
    'pecuario_actividades',
    'lista-actividades',
    (a) => `${a.modulo || '-'} | ${a.actividad || '-'} | Resp: ${a.responsable || '-'} | ${a.periodicidad || ''} (${a.semaforo || ''})`,
    null
  );

  (function () {
    const form = document.getElementById('form-config');
    if (!form) return;
    const saved = getData('pecuario_config');
    if (saved && saved.length) {
      const cfg = saved[saved.length - 1];
      Object.keys(cfg).forEach(k => {
        if (form.elements[k]) form.elements[k].value = cfg[k];
      });
    }
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const datos = new FormData(form);
      const obj = {};
      datos.forEach((val, key) => { obj[key] = val; });
      const lista = getData('pecuario_config');
      lista.push(obj);
      setData('pecuario_config', lista);
      alert('Configuración guardada.');
      actualizarPanel();
    });
  })();

  function actualizarPanel() {
    const animales  = getData('pecuario_animales');
    const pesos     = getData('pecuario_pesos');
    const repro     = getData('pecuario_repro');
    const sanidad   = getData('pecuario_sanidad');
    const visitas   = getData('pecuario_visitas');
    const bitacora  = getData('pecuario_bitacora');
    const climas    = getData('pecuario_clima');
    const conta     = getData('pecuario_conta');

    document.getElementById('pnl-animales').textContent = animales.length;
    document.getElementById('pnl-pesos').textContent    = pesos.length;
    document.getElementById('pnl-partos').textContent   = repro.length;
    document.getElementById('pnl-sanidad').textContent  = sanidad.length;
    document.getElementById('pnl-visitas').textContent  = visitas.length;
    document.getElementById('pnl-bitacora').textContent = bitacora.length;

    if (climas.length) {
      const ultimo = climas[climas.length - 1];
      document.getElementById('pnl-clima').textContent =
        `${ultimo.fecha || ''} | ${ultimo.cond || ''} | Tmin ${ultimo.tmin || ''} / Tmax ${ultimo.tmax || ''}`;
    } else {
      document.getElementById('pnl-clima').textContent = 'Sin datos';
    }

    let totalIng = 0;
    let totalGas = 0;
    conta.forEach(c => {
      const monto = parseFloat(c.monto || '0') || 0;
      if (c.tipo === 'Ingreso') totalIng += monto;
      if (c.tipo === 'Gasto')   totalGas += monto;
    });
    document.getElementById('pnl-conta').textContent =
      `$${totalIng.toFixed(2)} / $${totalGas.toFixed(2)}`;
  }

  function actualizarReportes() {
    const setCount = (id, arr) => {
      const el = document.getElementById(id);
      if (el) el.textContent = arr.length;
    };

    setCount('rep-animales',    getData('pecuario_animales'));
    setCount('rep-pesos',       getData('pecuario_pesos'));
    setCount('rep-repro',       getData('pecuario_repro'));
    setCount('rep-sanidad',     getData('pecuario_sanidad'));
    setCount('rep-clima',       getData('pecuario_clima'));
    setCount('rep-conta',       getData('pecuario_conta'));
    setCount('rep-seguridad',   getData('pecuario_visitas').concat(getData('pecuario_bitacora')));
    setCount('rep-maquinaria',  getData('pecuario_maquinaria'));
    setCount('rep-actividades', getData('pecuario_actividades'));
  }

  actualizarPanel();
  actualizarReportes();
</script>
</body>
</html>
